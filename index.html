<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>misha's site!!</title>
  <link rel="icon" href="https://mishalide.github.io/images/favicon.ico" type="image/x-icon" />
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background-color: #ffffff;
      color: #222;
      display: flex;
      flex-direction: column;
      min-height: 100vh;
    }
    .topbar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      background-color: #a2d2ff;
      padding: 10px 20px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.05);
    }
    .left, .right {
      display: flex;
      align-items: center;
      gap: 15px;
    }
    a.icon-link {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 30px;
      height: 30px;
      text-decoration: none;
      border: none;
    }
    a.icon-link svg {
      width: 24px;
      height: 24px;
      fill: #222;
      transition: fill 0.2s;
    }
    a.icon-link:hover svg {
      fill: #555;
    }
    a, button {
      color: #222;
      background: none;
      border: 1px solid #222;
      padding: 6px 12px;
      border-radius: 4px;
      text-decoration: none;
      cursor: pointer;
      font-size: 14px;
      transition: background-color 0.2s, color 0.2s, border-color 0.2s;
    }
    a:hover, button:hover {
      background-color: #d0e7ff;
      border-color: #555;
    }
    button {
      border: none;
      background: transparent;
      padding: 6px;
    }
    button svg {
      fill: #222;
      width: 20px;
      height: 20px;
      transition: fill 0.3s;
    }
    button:hover svg {
      fill: #555;
    }
    main {
      padding: 20px;
      flex: 1;
      max-width: 800px;
      margin: 0 auto;
    }
    #latest-posts div {
      border-bottom: 1px solid #ddd;
      padding-bottom: 15px;
      margin-bottom: 15px;
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      gap: 15px;
    }
    #latest-posts img {
      max-width: 120px;
      max-height: 90px;
      object-fit: cover;
      border-radius: 6px;
      flex-shrink: 0;
    }
    #latest-posts h3 {
      margin: 0 0 5px 0;
      font-weight: normal;
    }
    #latest-posts h3 a {
      font-weight: bold;
      color: #0077cc;
      text-decoration: underline;
      cursor: pointer;
    }
    #latest-posts p.snippet {
      flex: 1;
      margin: 0;
      color: #444;
    }
    footer {
      background-color: #f0f0f0;
      color: #555;
      text-align: center;
      font-size: 12px;
      padding: 10px;
      border-top: 1px solid #ddd;
    }
    p.read-blog-link a {
      border: none;
      padding: 0;
      background: none;
      text-decoration: underline;
      font: inherit;
      color: #0077cc;
      cursor: pointer;
    }
    #language-select {
      border: 1px solid #222;
      border-radius: 4px;
      padding: 6px 12px;
      font-size: 14px;
      cursor: pointer;
      background: #d0e7ff;
      color: #222;
      transition: background-color 0.2s;
    }
    #language-select:hover, #language-select:focus {
      background: #a2d2ff;
      outline: none;
    }
  </style>
</head>
<body>
  <nav class="topbar">
    <div class="left">
      <a class="icon-link" href="https://discordapp.com/users/1151318515693912137" target="_blank" title="Discord">
        <svg viewBox="0 0 24 24"><path d="M20.317..."/></svg>
      </a>
      <a class="icon-link" href="mailto:misha.a.golubev@gmail.com" title="Email">
        <svg viewBox="0 0 24 24"><path d="M20 4H4..."/></svg>
      </a>
      <a class="icon-link" href="https://www.linkedin.com/in/misha-golubev-0a953a27a/" target="_blank" title="LinkedIn">
        <svg viewBox="0 0 24 24"><path d="M4.98 3.5C..."/></svg>
      </a>
    </div>
    <div class="right">
      <button aria-label="Search">
        <svg viewBox="0 0 24 24"><path d="M15.5 14h..."/></svg>
      </button>
      <a href="about.html">About</a>
      <select id="language-select" aria-label="Select language" title="Select language">
        <option value="en">üá¨üáß English</option>
        <option value="fr">üá´üá∑ Fran√ßais</option>
        <option value="ru">üá∑üá∫ –†—É—Å—Å–∫–∏–π</option>
      </select>
    </div>
  </nav>

  <main>
    <div style="display: flex; flex-wrap: wrap; gap: 20px; align-items: flex-start; margin-bottom: 40px;">
      <div style="flex: 1; min-width: 250px;">
        <h1>hii! this is misha's website</h1>
        <p>i'm a high school student and fan of biochemistry (along with other things)</p>
        <p>I'm a student on Pearadox 5414, you can typically find me in the 3d printing corner... 3d printing things. In addition to that, I'm a data science aficionado (not really, but I'm good with making stuff in R). I'm also participating in NASA's GL4HS summer training program hosted virtually at the Ames Research Center. Next year, I'll be taking AP Chemistry, AP Physics, APUSH, APLAC, French 3, AP Precalc, and Art! </p>
        <p class="read-blog-link"><a href="blog.html">read things I write here</a></p>
      </div>
      <figure style="flex-shrink: 0; max-width: 300px; text-align: center; margin: 0;">
        <img src="images/protein.png" alt="Protein structure" style="width: 100%; height: auto; border-radius: 8px; border: 1px solid #ccc;" />
        <figcaption style="font-size: 13px; color: #555; margin-top: 6px;">
          (sorry, not at home so can't make any fancy PyMOL renders ‚Äî use this one courtesy of Jumper, J. et al via Wikimedia Commons)
        </figcaption>
      </figure>
    </div>
    <section id="latest-posts-section" style="margin-top: 50px;">
      <h2>Latest Posts</h2>
      <div id="latest-posts">Loading latest posts...</div>
    </section>
  </main>
  <footer>
    ¬© 2025 misha - hosted by GitHub Pages - powered by terrible html code
  </footer>

  <script>
    async function fetchBlogPosts() {
      try {
        const res = await fetch('blog.html');
        const text = await res.text();
        const parser = new DOMParser();
        const doc = parser.parseFromString(text, 'text/html');
        const postDivs = [...doc.querySelectorAll('#posts .post')];
        const posts = postDivs.map(div => {
          const title = div.querySelector('h2')?.textContent.trim() || 'No title';
          const snippet = div.querySelector('p')?.textContent.trim() || '';
          const date = div.getAttribute('data-date') || 'Unknown';
          const tags = [...(div.querySelectorAll('.tags span') || [])].map(s => s.textContent.trim());
          const img = div.querySelector('img')?.src || null;
          return { title, snippet, date, tags, img };
        }).sort((a,b) => new Date(b.date) - new Date(a.date)).slice(0,3);

        document.getElementById('latest-posts').innerHTML = posts.map(post => `
          <div>
            <div style="flex: 1;">
              <h3><a href="blog.html">${post.title}</a></h3>
              <p style="font-size: 12px; color: #666; margin: 0 0 6px;">${post.date} ‚Äî Tags: ${post.tags.join(', ')}</p>
              <p class="snippet">${post.snippet.length > 150 ? post.snippet.slice(0,147) + '...' : post.snippet}</p>
            </div>
            ${post.img ? `<img src="${post.img}" alt="">` : ''}
          </div>`).join('');
      } catch (e) {
        document.getElementById('latest-posts').textContent = 'Failed to load posts.';
      }
    }
    fetchBlogPosts();

    document.querySelector('button[aria-label="Search"]').onclick = async function() {
      const query = prompt("Enter search term:");
      if (!query) return;
      try {
        const res = await fetch('/search-index.json');
        const index = await res.json();
        const q = query.toLowerCase();
        const results = index.filter(p => p.title.toLowerCase().includes(q) || p.content.toLowerCase().includes(q));

        let container = document.getElementById('search-results');
        if (!container) {
          container = document.createElement('div');
          container.id = 'search-results';
          container.style.margin = '20px auto';
          container.style.maxWidth = '800px';
          container.style.background = '#f9f9f9';
          container.style.padding = '20px';
          container.style.border = '1px solid #ccc';
          container.style.borderRadius = '8px';
          document.body.insertBefore(container, document.querySelector('main'));
        }

        container.innerHTML = `<h2>Search results for "${query}":</h2>`;
        if (results.length === 0) {
          container.innerHTML += '<p>No results found.</p>';
          return;
        }

        const ul = document.createElement('ul');
        ul.style.listStyle = 'none';
        ul.style.padding = '0';
        results.forEach(p => {
          const li = document.createElement('li');
          li.style.marginBottom = '20px';
          li.innerHTML = `<a href="${p.url}" style="font-weight:bold;color:#0077cc;text-decoration:none">${p.title}</a>
                          <p style="color:#555;margin:6px 0">${p.content.length > 200 ? p.content.slice(0,197) + '...' : p.content}</p>`;
          ul.appendChild(li);
        });
        container.appendChild(ul);
        container.scrollIntoView({ behavior: 'smooth' });
      } catch (err) {
        alert("Search failed: " + err.message);
      }
    };
  </script>
</body>
</html>
